当涉及前端开发时，请 Agent 参考这个文档。

# 项目结构

## 组件架构分层

项目采用四层组件架构，从底层到顶层依次为：

### 1. 基础组件层 (`src/components/ui/`)
- 基于 shadcn/ui（底层使用 Radix UI）
- 提供无样式或基础样式的基础组件
- 包含：Card、Badge、Button、Form、Input、Dialog 等通用组件
- 职责：提供基础功能和可定制的样式接口

### 2. 自定义样式组件层 (`src/components/ui-custom/`)
- 基于 `ui/` 组件，添加项目特定的自定义样式
- 封装简单的业务逻辑（如单位转换、格式化等）
- 包含：MetricCard、ProgressCard、CardTitle 等
- 职责：统一项目的视觉风格和常用样式模式

### 3. 业务组件层 (`src/components/` 下的其他目录)
- 基于 `ui/` 和 `ui-custom/` 组件构建
- 封装具体的业务逻辑和功能
- 按业务领域组织：`badge/`、`form/`、`job/`、`layout/`、`file/` 等
- 职责：提供可复用的业务功能组件

### 4. 页面层 (`src/routes/`)
- 使用业务组件组合构建完整页面
- 处理页面级的状态管理和路由逻辑
- 职责：组装业务组件，实现具体的页面功能

## 路由系统

项目使用 **TanStack Router**，基于文件系统的路由。

### 路由文件位置
- 路由定义：`src/routes/` 目录下的文件
- 路由树生成：`src/routeTree.gen.ts`（自动生成，不要手动修改）
- 路由配置：`src/router.tsx`

### 路由文件命名规则
- `route.tsx` - 布局路由（使用 `<Outlet />` 渲染子路由）
- `index.tsx` - 索引路由（目录的默认路由）
- `$name.tsx` - 动态路由参数（如 `$name` 表示路径参数）
- `$.tsx` - 捕获所有路由（通配符路由）

### 路由定义方式
每个路由文件使用 `createFileRoute('/path')` 定义，支持：
- `component` - 路由组件
- `loader` - 数据加载器（返回 `crumb` 设置面包屑导航）
- `beforeLoad` - 路由加载前的钩子（常用于权限检查）
- `validateSearch` - 验证 URL 查询参数

### 添加新路由
1. 在 `src/routes/` 下创建文件，文件路径对应 URL 路径
2. 使用 `createFileRoute('/path')` 定义路由
3. 在 `loader` 中返回 `crumb` 设置面包屑导航
4. 路由树会自动生成（开发时自动更新）

### 修改现有路由
- 直接修改对应的路由文件
- 修改路径：重命名文件或目录，路由树会自动更新
- 修改配置：在 `createFileRoute` 中修改相关配置

### 布局路由 vs 动态路由
- **布局路由**：使用 `route.tsx` 命名，通过 `<Outlet />` 为子路由提供共享布局（如侧边栏、导航栏）
- **动态路由**：使用 `$name.tsx` 命名，匹配 URL 参数，通过 `Route.useParams()` 获取参数值


# 注意事项

## 整体

在你给出设计或实现方案时：

- 必须尽量复用上述层次中已经有的组件，如果没有相关的组件，再考虑新建
- 由于组件的复用程度高，修改它们必须非常谨慎，如果你决定要修改某个组件，你需要给用户输出充分的原因，并检查所有对于该组件的引用
- 尽量保持风格和颜色的一致，尤其是新的页面，请参考现有页面的布局方式
- 考虑人文关怀，包括按钮的顺序等细节可能需要额外的思考
- 前端配置了多语言，在实现和修改过程中，请你注意不要硬编码文本，并且我们先只提供中文文本，完成后再统一翻译到其他语言的 json 中

## 具体
- 当用户需要判断当前用户正在使用的身份时，请使用 `frontend/src/hooks/use-admin.tsx` 中提供的 `useIsAdmin()`
- `frontend/src/hooks` 目录下还提供了其它的 hooks，如果你在实现相关功能，请先检查这里是否有能够直接使用的内容
- 对于新建的页面，请不要忘记设置它的面包屑导航